# RegExp（JavaScript 对象）

[TOC]

## 概述

正则表达式是描述字符模式的对象，用于对字符串模式匹配及检索替换，是对字符串执行模式匹配的强大工具

## 声明语法

- 使用构造函数声明正则对象：
  const patt = new RegExp(pattern, modifiers);

- 或者使用简便方式声明：
  const patt = /pattern/modifiers;

- pattern(模式) 描述了表达式的模式
- modifiers(修饰符) 用于指定全局匹配、区分大小写的匹配和多行匹配

> 当使用构造函数创造正则对象时，需要常规的字符转义规则（在前面加反斜杠 \）

## 修饰符

- 执行对大小写不敏感的匹配：`/data/i`
- 执行复数匹配：`/data/g`
- 执行多行匹配：`/data/m`

## 集合

- 使用方括号，用于规定所检索字符的范围

  /./ 查找所有字符
  /[abc]/ 查找 abc 中的任意字符
  `/[^abc]/` 查找非 abc 中的任意字符
  /[0-9]/ 查找任何从 0 至 9 的数字
  /[a-z]/ 查找任何从小写 a 到小写 z 的字符
  /[A-z]/ 查找任何从大写 A 到小写 z 的字符，包括 "\_"
  /[A-Z]/ 查找任何从大写 A 到大写 Z 的字符
  /[a-ce-g]/

  /[adgk]/ 查找给定集合内的任何字符
  /[^adgk]/ 查找给定集合外的任何字符（非）
  (red|blue|green) 查找任何指定的选项

  /([][]){}/ 大集合

## 量词

- 用于规定所检索字符的长度

  > 贪婪法则：正则会优先匹配多个

  /n+/ 匹配任何包含至少一个 n 的字符串
  例如：/a+/ 匹配到 "candy" 中的 "a"，"caaandy" 中的 "aaa"
  /n?/ 匹配任何包含零个或一个 n 的字符串
  例如：/e?le?/ 匹配 "angel" 中的 "el"，"angle" 中的 "le"，"angl" 中的 "l"
  /n*/ 匹配任何包含零个或多个 n 的字符串
  例如：/bo*/ 匹配到 "booed" 中的 "boo"，"bird" 中的 "b"，但是不匹配 "goat"

  /n{X}/ 匹配包含 X 个 n 的序列的字符串
  例如：/a{2}/ 不匹配 "candy"，但是匹配 "caaandy," 中的 "aa"
  /n{X,}/ X 是一个正整数；前面的模式 n 连续出现至少 X 次时匹配
  例如：/a{2,}/ 不匹配 "candy"，但是匹配 "caaandy" 中的 "aaa"
  /n{X,Y}/ X 和 Y 为正整数；前面的模式 n 连续出现至少 X 次，至多 Y 次时匹配
  例如：/a{2,3}/ 不匹配 "candy"，匹配 "caandy," 中的 "aa"，"caaaaandy" 中的 "aaa"

## 始末标记

- `/^n/` 匹配任何开头为 n 的字符串
- `/n$/` 匹配任何结尾为 n 的字符串
- `/?=n/` 匹配任何其后紧接指定字符串 n 的字符串
- `/?!n/` 匹配任何其后没有紧接指定字符串 n 的字符串

## 元字符

- 元字符（Metacharacter）是拥有特殊含义的字符
  "\" 转义字符

  /./ 查找单个字符，除了换行和行结束符
  /\w/ 查找单词字符
  /\W/ 查找非单词字符
  /\d/ 查找数字
  /\D/ 查找非数字字符
  /\s/ 查找空白字符
  /\S/ 查找非空白字符
  /\b/ 匹配单词边界
  /\B/ 匹配非单词边界
  /\0/ 查找 NULL 字符
  /\n/ 查找换行符
  /\f/ 查找换页符
  /\r/ 查找回车符
  /\t/ 查找制表符
  /\v/ 查找垂直制表符
  /\xxx/ 查找以八进制数 xxx 规定的字符
  /\xdd/ 查找以十六进制数 dd 规定的字符
  /\uxxxx/ 查找以十六进制数 xxxx 规定的 Unicode 字符
  /\u4e00-\u9fa5/ 查找中文字符

## RegExp 对象方法

- `RegExp.test()` 检索字符串中指定的值，返回布尔值
- `RegExp.exec()` 检索字符串中指定的值。返回找到的值，并确定其位置
- `RegExp.toString()` 返回正则表达式的字符串

## RegExp 对象属性

- constructor 返回一个函数，该函数是一个创建 RegExp 对象的原型。
- global 判断是否设置了 "g" 修饰符
- ignoreCase 判断是否设置了 "i" 修饰符
- lastIndex 用于规定下次匹配的起始位置
- multiline 判断是否设置了 "m" 修饰符
- source 返回正则表达式的匹配模式

## 支持正则表达式的 String 对象方法

- search() // 检索字符串中与正则表达式相匹配的值的下标
- match() // 以数组的形式返回匹配到的值
- replace(RegExp, replace) // 替换与 RegExp 匹配的子串，返回替换后的字符串（不改变原数组）

> replace()的第二个参数也可以是函数，其传入参数为检索到的字符串，返回 replace
