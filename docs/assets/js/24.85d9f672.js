(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{222:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[t._v("#")]),t._v(" Babel")]),t._v(" "),a("p",[t._v("[TOC]")]),t._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),a("p",[a("strong",[t._v("Babel")]),t._v(" 是一个 "),a("strong",[t._v("JavaScript")]),t._v(" 编译器，主要用于将 "),a("strong",[t._v("ES2015+")]),t._v(" 版本的代码转换为向后兼容的 "),a("strong",[t._v("JavaScript")]),t._v(" 语法，从而在现有环境执行")]),t._v(" "),a("h2",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),a("p",[t._v("配置文件用于设置转码规则和插件，"),a("strong",[t._v("Babel")]),t._v(" 的配置文件为 "),a("em",[t._v(".babelrc")]),t._v(" 或 "),a("em",[t._v("babel.config.js")]),t._v("。")]),t._v(" "),a("p",[t._v("官方建议使用 "),a("em",[t._v("babel.config.js")]),t._v("，配置文件存放于项目根目录下。")]),t._v(" "),a("ul",[a("li",[a("em",[t._v("babel.config.js")]),t._v(" 文件基本格式如下：")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("api")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" presets "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    presets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("em",[t._v(".babelrc")]),t._v(" 文件基本格式如下：")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transform-vue-jsx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transform-runtime"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("还可以选择将 .babelrc 中的配置信息作为 babel 键的值添加到 package.json 文件中，如下所示：")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-package"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"babel"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("presets")]),t._v(" 字段设定转码规则，以下是官方提供的规则集，使用 "),a("strong",[t._v("npm")]),t._v(" 安装后在配置文件中导入\n"),a("ul",[a("li",[a("strong",[t._v("ES2015")]),t._v(" 转码规则：babel-preset-es2015")]),t._v(" "),a("li",[a("strong",[t._v("ES7")]),t._v(" 不同阶段语法提案的转码规则（共有 4 个阶段），选装一个：")]),t._v(" "),a("li",[t._v("babel-preset-stage-0")]),t._v(" "),a("li",[t._v("babel-preset-stage-1")]),t._v(" "),a("li",[t._v("babel-preset-stage-2")]),t._v(" "),a("li",[t._v("babel-preset-stage-3")]),t._v(" "),a("li",[a("strong",[t._v("React")]),t._v(" 转码规则：babel-preset-react")])])]),t._v(" "),a("li",[t._v("如果某些代码需要调用 "),a("strong",[t._v("Babel")]),t._v(" 的 "),a("strong",[t._v("API")]),t._v(" 进行转码，就要使用 "),a("code",[t._v("babel-core")]),t._v(" 模块")]),t._v(" "),a("li",[a("strong",[t._v("babel-preset-env")]),t._v(" 可以根据配置的目标运行环境自动启用需要的 "),a("strong",[t._v("babel")]),t._v(" 插件")])]),t._v(" "),a("h2",{attrs:{id:"相关工具包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关工具包"}},[t._v("#")]),t._v(" 相关工具包")]),t._v(" "),a("ol",[a("li",[a("em",[t._v("@babel/core")]),t._v(" "),a("strong",[t._v("Babel")]),t._v(" 核心模块")]),t._v(" "),a("li",[a("em",[t._v("@babel/cli")]),t._v(" 命令行工具")]),t._v(" "),a("li",[a("em",[t._v("@babel/preset-env")]),t._v(" 会为目标浏览器中没有的功能加载转换插件")]),t._v(" "),a("li",[a("em",[t._v("@babel/polyfill")]),t._v(" 模块包括 core-js 和一个自定义的 regenerator runtime 模块用于模拟完整的 ES2015+ 环境")])]),t._v(" "),a("h2",{attrs:{id:"运行时转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行时转换"}},[t._v("#")]),t._v(" 运行时转换")]),t._v(" "),a("ul",[a("li",[t._v("使用 JSX 可以极大的简化 React 元素的创建，JSX 抽象化了 React.createElement() 函数的使用。")]),t._v(" "),a("li",[t._v("通过 Babel，将 JSX 转换为使用 React.createElement() 类的 ES5 的语句，使其能被现今的浏览器引擎识别")])]),t._v(" "),a("blockquote",[a("p",[t._v("在运行时引用 babel.js 虽然容易使用而且还很方便，不过并不是一种好的方案，因为需要转换，所以更加耗时。\n这一缺点在产品阶段显得更加明显。类似于 JSFiddle 这样的工具，在线转换 React 用的就是这种方法。")])]),t._v(" "),a("ul",[a("li",[t._v("browser.js 为 babel.js 的浏览器版本，"),a("code",[t._v('type="text/babel"')])])])])}),[],!1,null,null,null);s.default=n.exports}}]);